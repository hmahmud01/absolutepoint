{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="mb-4 mb-lg-5">
    <!-- Form Elements -->
    <div class="col-lg-12 mb-5">
        {% if rank %}
        <div class="card h-100 mt-5 mb-5">
            <div class="card-body d-flex">
                <div class="row w-100 align-items-center">
                    <div class="col-sm-12 mb-4 mb-sm-0">
                        <h2 class="mb-0 d-flex align-items-center"></h2>
                        <span class="text-muted text-uppercase small">Profile Tier</span>
                        <hr>
                        <small class="text-muted">Tier: T{{ rank.tier }}</small> <br>
                        <small class="text-muted">Rank: {{ rank.title }}</small> <br>
                        <small class="text-muted">Percentage: {{ rank.sale_percent }}%</small> <br>
                        <small class="text-muted">Current earning: {{ rank.current_earn }}</small> <br>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        
        <div class="card h-100 mt-5 mb-5">
            <div class="card-body d-flex">
                <div class="row w-100 align-items-center">
                    <div class="col-sm-12 mb-4 mb-sm-0">
                        <h2 class="mb-0 d-flex align-items-center"></h2>
                        <span class="text-muted text-uppercase small">User Information</span>
                        <hr>
                        <p>Username : {{ user.username }}</p>
                        <p>Name : {{ user.name }}</p>
                        <p>Email : {{ user.email }}</p>
                        <p>Phone : {{ user.phone }}</p>
                        <p>Address : {{ user.address }}</p>
                        <p>Date Joined : {{ user.created_at }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 col-xl-12 mb-5 mb-lg-0">
                <div class="card h-100">
                    <div class="card-header">
                        <h4 class="card-heading">Sales Info</h4>
                    </div>
                    <div class="card-body">
                        <p class="mb-5"><span>Total Service Estimated Income: </span> <strong>{{ total_service_price }}</strong> $</p>
                        <p class="mb-5"><span>Total Received: </span> <strong>{{ total_payment_accepted }}</strong> $</p>
                        <p class="mb-5"><span>Total Due Till Now: </span> <strong>{{ total_due }}</strong> $</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card card-table h-100 mt-5 mb-5">
            <div class="card-header">
                <h5 class="card-heading"> Status of Services</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>Id</th>
                                <th>Date</th>
                                <th>Service Title</th>
                                <th>Site Name</th>
                                <th>Price</th>
                                <th>Pyament Status</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for service in services %}
                            <tr class="align-middle">
                                <td><a href="{% url 'servicedetail' service.id %}">#{{forloop.counter}}</a></td>
                                <td>{{ service.date }}</td>
                                <td>{{ service.title }}</td>
                                <td>{{ service.site_name }}</td>
                                <th>{{ service.price }} $</th>
                                <td>{{ service.payment_status }}</td>
                                <td><span class="badge badge-info-light">{{ service.status }}</span></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}