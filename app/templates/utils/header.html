<header class="header">
  <nav class="navbar navbar-expand-lg px-4 py-2 bg-white shadow"><a
      class="sidebar-toggler text-gray-500 me-4 me-lg-5 lead" href="#"><i class="fas fa-align-left"></i></a><a
      class="navbar-brand fw-bold text-uppercase text-base" href="/"><span
        class="d-none d-brand-partial">Absolute </span><span class="d-none d-sm-inline">Point</span></a>
    <ul class="ms-auto d-flex align-items-center list-unstyled mb-0">
      <li class="nav-item dropdown">
        <form class="ms-auto me-4 d-none d-lg-block" id="searchForm">
          <div class="input-group input-group-sm input-group-navbar">
            <input class="form-control" id="searchInput" type="search" placeholder="Search">
            <button class="btn" type="button"> <i class="fas fa-search"></i></button>
          </div>
        </form>
        <div class="dropdown-menu dropdown-menu-animated text-sm" id="searchDropdownMenu">
          <h6 class="dropdown-header text-uppercase fw-normal">Recent pages</h6><a class="dropdown-item py-1"
            href="cms-post.html"> <i class="far fa-file me-2"> </i>Posts</a><a class="dropdown-item py-1"
            href="widgets-stats.html"> <i class="far fa-file me-2"> </i>Widgets</a><a class="dropdown-item py-1"
            href="pages-profile.html"> <i class="far fa-file me-2"> </i>Profile</a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header text-uppercase fw-normal">Users</h6><a class="dropdown-item py-1"
            href="pages-profile.html"> <img class="avatar avatar-xs p-1 me-2" src="/static/img/avatar-0.jpg"
              alt="Jason Doe"><span>Jason Doe</span></a><a class="dropdown-item py-1" href="pages-profile.html"> <img
              class="avatar avatar-xs p-1 me-2" src="/static/img/avatar-1.jpg" alt="Frank Williams"><span>Frank
              Williams</span></a><a class="dropdown-item py-1" href="pages-profile.html"> <img
              class="avatar avatar-xs p-1 me-2" src="/static/img/avatar-2.jpg" alt="Ashley Wood"><span>Ashley
              Wood</span></a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header text-uppercase fw-normal">Filters</h6><a class="dropdown-item py-1" href="#!">
            <span class="badge me-2 badge-success-light">Posts</span><span class="text-xs">Search all
              posts</span></a><a class="dropdown-item py-1" href="#!"> <span
              class="badge me-2 badge-danger-light">Users</span><span class="text-xs">Only in users</span></a><a
            class="dropdown-item py-1" href="#!"> <span class="badge me-2 badge-warning-light">Campaigns</span><span
              class="text-xs">Only in campaigns</span></a>
        </div>
      </li>
      <li class="nav-item dropdown me-2"><a class="nav-link nav-link-icon text-gray-400 px-1" id="notifications"
          href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <svg class="svg-icon svg-icon-md svg-icon-heavy">
            <use xlink:href="icons/orion-svg-sprite.svg#sales-up-1"> </use>
          </svg><span class="notification-badge bg-green"></span></a>
        <div class="dropdown-menu dropdown-menu-end dropdown-menu-animated text-sm" aria-labelledby="notifications"><a
            class="dropdown-item" href="#">
            <div class="d-flex align-items-center">
              <div class="icon icon-sm bg-indigo text-white"><i class="fab fa-twitter"></i></div>
              <div class="text ms-2">
                <p class="mb-0">You have 2 followers</p>
              </div>
            </div>
          </a><a class="dropdown-item" href="#">
            <div class="d-flex align-items-center">
              <div class="icon icon-sm bg-green text-white"><i class="fas fa-envelope"></i></div>
              <div class="text ms-2">
                <p class="mb-0">You have 6 new messages</p>
              </div>
            </div>
          </a><a class="dropdown-item" href="#">
            <div class="d-flex align-items-center">
              <div class="icon icon-sm bg-blue text-white"><i class="fas fa-upload"></i></div>
              <div class="text ms-2">
                <p class="mb-0">Server rebooted</p>
              </div>
            </div>
          </a><a class="dropdown-item" href="#">
            <div class="d-flex align-items-center">
              <div class="icon icon-sm bg-indigo text-white"><i class="fab fa-twitter"></i></div>
              <div class="text ms-2">
                <p class="mb-0">You have 2 followers</p>
              </div>
            </div>
          </a>
          <div class="dropdown-divider"></div><a class="dropdown-item text-center" href="#"><small
              class="fw-bold text-uppercase">View all notifications</small></a>
        </div>
      </li>
      <!-- Messages                        -->
      <li class="nav-item dropdown me-2 me-lg-3"> <a class="nav-link nav-link-icon text-gray-400 px-1" id="messages"
          href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <svg class="svg-icon svg-icon-md svg-icon-heavy">
            <use xlink:href="icons/orion-svg-sprite.svg#paper-plane-1"> </use>
          </svg><span class="notification-badge notification-badge-number bg-primary">10</span></a>
        <div class="dropdown-menu dropdown-menu-end dropdown-menu-animated text-sm" aria-labelledby="messages"><a
            class="dropdown-item d-flex align-items-center p-3" href="#"> <img class="avatar avatar-sm p-1 me-2"
              src="/static/img/avatar-0.jpg" alt="Jason Doe">
            <div class="pt-1">
              <h6 class="fw-bold mb-0">Jason Doe</h6><span class="text-muted text-sm">Sent you a message</span>
            </div>
          </a><a class="dropdown-item d-flex align-items-center p-3" href="#"> <img class="avatar avatar-sm p-1 me-2"
              src="/static/img/avatar-1.jpg" alt="Frank Williams">
            <div class="pt-1">
              <h6 class="fw-bold mb-0">Frank Williams</h6><span class="text-muted text-sm">Sent you a message</span>
            </div>
          </a><a class="dropdown-item d-flex align-items-center p-3" href="#"> <img class="avatar avatar-sm p-1 me-2"
              src="/static/img/avatar-2.jpg" alt="Ashley Wood">
            <div class="pt-1">
              <h6 class="fw-bold mb-0">Ashley Wood</h6><span class="text-muted text-sm">Sent you a message</span>
            </div>
          </a>
          <div class="dropdown-divider"></div><a class="dropdown-item text-center" href="#"> <small
              class="fw-bold text-uppercase">View all messages </small></a>
        </div>
      </li>
      <li class="nav-item dropdown ms-auto"><a class="nav-link pe-0" id="userInfo" href="#" data-bs-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false"><img class="avatar p-1" src="/static/img/axe2.jpg"
            alt="Jason Doe"></a>
        <div class="dropdown-menu dropdown-menu-end dropdown-menu-animated" aria-labelledby="userInfo">
          <div class="dropdown-header text-gray-700">
            <h6 class="font-weight-bold">{{ request.user.username }}</h6>
          </div>
          <div class="dropdown-divider"></div>          
          <!-- <a class="dropdown-item" href="#">Activity log </a> -->
          <a class="dropdown-item" data-bs-toggle="offcanvas" href="#profileOffcanvas" role="button"
            aria-controls="offcanvasExample">
            Profile
          </a>
          <div class="dropdown-divider"></div><a class="dropdown-item" href="{% url 'resetpassword'  %}">Reset Password</a>
          <div class="dropdown-divider"></div><a class="dropdown-item" href="{% url 'logout'  %}">Logout</a>
        </div>
      </li>
    </ul>
  </nav>
</header>


<div class="offcanvas offcanvas-end" tabindex="-1" id="profileOffcanvas" aria-labelledby="offcanvasExampleLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasExampleLabel">Profile</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div>
      <h1>Profile Information</h1>
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#updateprofile">
        Update Profile
      </button>
      {% if rank %}
      <div class="card h-100 mt-5 mb-5">
        <div class="card-body d-flex">
          <div class="row w-100 align-items-center">
            <div class="col-sm-12 mb-4 mb-sm-0">
              <h2 class="mb-0 d-flex align-items-center"></h2>
              <span class="text-muted text-uppercase small">Profile Tier</span>
              <hr>
              <small class="text-muted">Tier: T{{ rank.tier }}</small> <br>
              <small class="text-muted">Rank: {{ rank.title }}</small> <br>
              <small class="text-muted">Percentage: {{ rank.sale_percent }}%</small> <br>
              <small class="text-muted">Current earning: {{ rank.current_earn }}</small> <br>
            </div>
          </div>
        </div>
      </div>
      {% endif %}      
      <div class="card h-100 mt-5 mb-5">
        <div class="card-body d-flex">
          <div class="row w-100 align-items-center">
            <div class="col-sm-12 mb-4 mb-sm-0">
              <h2 class="mb-0 d-flex align-items-center"></h2>
              <span class="text-muted text-uppercase small">User Information</span>
              <hr>
              <p>Username : {{ info.username }}</p>
              <p>Name : {{ info.name }}</p>
              <p>Email : {{ info.email }}</p>
              <p>Phone : {{ info.phone }}</p>
              <p>Address : {{ info.address }}</p>
              <p>Date Joined : {{ info.created_at }}</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Button trigger modal -->      
    </div>
  </div>
</div>




<!-- Modal -->
<div class="modal fade" id="updateprofile" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form action="{% url 'updateuser' %}" method="post"> {% csrf_token %}
        <div class="modal-body">
          <input type="hidden" name="id" value="{{ request.user.id }}">
          <div class="row">
            <label class="col-md-3 form-label">Full Name</label>
            <div class="col-md-9">
              <input class="form-control" name="name" type="text" placeholder="Full Name" value="{{ info.name }}">
            </div>
          </div>
          <hr class="bg-gray-400 my-4">
          <div class="row">
            <label class="col-md-3 form-label">Email Address</label>
            <div class="col-md-9">
              <input class="form-control" name="email" type="text" placeholder="Email Address" value="{{ info.email }}">
            </div>
          </div>
          <hr class="bg-gray-400 my-4">
          <div class="row">
            <label class="col-md-3 form-label">Phone Number</label>
            <div class="col-md-9">
              <input class="form-control" name="phone" type="text" placeholder="Phone Number" value="{{ info.phone }}">
            </div>
          </div>
          <hr class="bg-gray-400 my-4">
          <div class="row">
            <label class="col-md-3 form-label">Address</label>
            <div class="col-md-9">
              <input class="form-control" name="address" type="text" placeholder="Address" value="{{ info.address }}">
            </div>
          </div>
          <hr class="bg-gray-400 my-4">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Save changes</button>
        </div>
      </form>
    </div>
  </div>
</div>